---
layout: default
---

<div class="post">
  <div class="post-info">
    <span>Written by</span>
    {{ site.author.name }}

    {% if page.date %}
      <br>
      <span>on&nbsp;</span><time datetime="{{ page.date }}">{{ page.date | date: "%B %d, %Y" }}</time>
    {% endif %}
  </div>

  <h1 class="post-title">{{ page.title }}</h1>
  <div class="post-line"></div>
  {{ content }}
</div>

{% if page.comments %}
  {% include disqus_comments.html %}
{% endif %}

<div class="pagination">
  {% if page.next.url %}
    <a href="{{ page.next.url | prepend: site.baseurl }}" class="left arrow">&#8592;</a>
  {% endif %}
  {% if page.previous.url %}
    <a href="{{ page.previous.url | prepend: site.baseurl }}" class="right arrow">&#8594;</a>
  {% endif %}

  <a href="#" class="top">Top</a>
</div>

<div id="toc-sidebar" class="toc-sidebar">
  <div class="toc-header">Contents</div>
  <ul id="toc-list"></ul>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
  var tocList = document.getElementById("toc-list");
  var tocSidebar = document.getElementById("toc-sidebar");
  
  // 중요: .post 클래스 내부의 h1, h2, h3를 찾되, 맨 위 제목(.post-title)은 제외함
  var headers = document.querySelectorAll(".post h1:not(.post-title), .post h2, .post h3");

  // 목차 만들 헤더가 없으면 아예 숨김
  if (headers.length === 0) {
    tocSidebar.style.display = "none";
    return;
  }

  headers.forEach(function(header, index) {
    // ID가 없으면 자동 생성 (링크 연결용)
    if (!header.id) {
      header.id = "header-" + index;
    }

    var li = document.createElement("li");
    var a = document.createElement("a");
    
    a.href = "#" + header.id;
    a.textContent = header.textContent;
    
    // 태그(H1, H2, H3)에 따라 들여쓰기 클래스 적용
    li.className = "toc-" + header.tagName.toLowerCase();
    
    li.appendChild(a);
    tocList.appendChild(li);
  });

  // 스크롤 스파이 (현재 위치 하이라이트)
  window.addEventListener("scroll", function() {
    var fromTop = window.scrollY + 150; // 조금 더 여유있게 감지
    
    var currentHeader = null;
    headers.forEach(function(header) {
      if (header.offsetTop <= fromTop) {
        currentHeader = header;
      }
    });

    if (currentHeader) {
      var activeLinks = tocList.querySelectorAll("a.active");
      activeLinks.forEach(link => link.classList.remove("active"));
      
      var activeLink = tocList.querySelector('a[href="#' + currentHeader.id + '"]');
      if (activeLink) {
        activeLink.classList.add("active");
      }
    }
  });
});
</script>

<style>
/* === [1] 제목 크기 조절 (요청하셨던 부분) === */
  .post-title {
    font-size: 2.2rem !important;
    letter-spacing: -0.05rem;
    margin-bottom: 1rem;
    font-weight: 700;
  }
  /* 모바일에서는 제목 더 작게 */
  @media (max-width: 768px) {
    .post-title {
      font-size: 1.6rem !important;
    }
  }

  /* === [2] 목차(TOC) 스타일 === */
  .toc-sidebar {
    position: fixed;
    top: 150px;
    left: 20px;
    width: 220px;
    max-height: 70vh;
    overflow-y: auto;
    z-index: 100;
    font-family: "Pretendard", sans-serif;
  }
  
  .toc-header {
    font-weight: 700;
    font-size: 0.8rem;
    color: #aaa;
    margin-bottom: 10px;
    padding-left: 10px;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .toc-sidebar ul {
    list-style: none;
    padding: 0;
    margin: 0;
    border-left: 1px solid #eee;
  }

  .toc-sidebar li {
    margin: 0;
  }

  .toc-sidebar a {
    display: block;
    text-decoration: none;
    color: #999;
    transition: all 0.2s;
    border-left: 2px solid transparent;
    margin-left: -1px;
    line-height: 1.5;
    padding-top: 4px;
    padding-bottom: 4px;
  }

  /* --- [핵심] 계층별 들여쓰기 설정 --- */
  
  /* H1, H2: 대주제 (들여쓰기 없음, 굵게) */
  .toc-h1 a, 
  .toc-h2 a {
    padding-left: 15px;      /* 기본 여백 */
    font-size: 0.85rem;
    font-weight: 600;        /* 조금 두껍게 */
  }

  /* H3: 소주제 (들여쓰기 추가) */
  .toc-h3 a {
    padding-left: 30px;      /* 안쪽으로 더 들어감 */
    font-size: 0.8rem;       /* 글자 약간 작게 */
    font-weight: 400;
  }

  /* H4: 더 깊은 주제 (혹시 쓸 경우를 대비) */
  .toc-h4 a {
    padding-left: 45px;
    font-size: 0.75rem;
    color: #bbb;
  }

  /* ----------------------------------- */

  /* 마우스 올리거나 활성화됐을 때 */
  .toc-sidebar a:hover,
  .toc-sidebar a.active {
    color: #333;
    border-left-color: #333;
  }
  
  /* H3 이하가 활성화되면 글자색만 진하게 (굵기는 유지) */
  .toc-h3 a.active {
    font-weight: 500;
  }

  /* 반응형: 화면 좁을 때 숨김 */
  @media (max-width: 1400px) {
    .toc-sidebar {
      display: none;
    }
  }
  
  /* 스크롤바 디자인 */
  .toc-sidebar::-webkit-scrollbar {
    width: 3px;
  }
  .toc-sidebar::-webkit-scrollbar-thumb {
    background-color: #ddd;
    border-radius: 2px;
  }
</style>
